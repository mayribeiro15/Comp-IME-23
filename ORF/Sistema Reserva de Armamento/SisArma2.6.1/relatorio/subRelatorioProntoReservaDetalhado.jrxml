<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.11.0.final using JasperReports Library version 6.11.0-0c4056ccaa4d25a5a8c45672d2f764ea3498bebb  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relatorioAltEquipamento" pageWidth="440" pageHeight="842" columnWidth="440" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="f7ba90c7-be6c-4c19-8051-8b413dfd2a12">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="DataAdapter.xml"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<parameter name="ID_DESTINO" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[$P{ID_DESTINO}]]></defaultValueExpression>
	</parameter>
	<queryString language="SQL">
		<![CDATA[select  
destino.id,concat(' ', 
     if(arma.nome is null,equipamento.nome,arma.nome),'  ',
'  ',ifnull(fabricante.nome, ' '),
'   ',ifnull(calibre.nome, ' ') ) as descricao, sum(item.qtd) as qtd from item
                inner join cautela on cautela.id = item.idCautela
                inner join destino on destino.id = cautela.idDestino
                inner join equipamento on equipamento.id = item.idEquipamento
                left join arma on equipamento.idarma = arma.id 
                left join calibre on equipamento.idCalibre = calibre.id
                left join fabricante on equipamento.idFabricante = fabricante.id
                inner join militar on militar.id = cautela.idMilitar 
                where item.statusIte = 'CAUTELADO' and destino.id = $P{ID_DESTINO} 
                group by arma.nome, equipamento.nome
                order by qtd desc,arma.nome]]>
	</queryString>
	<field name="id" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="destino"/>
	</field>
	<field name="descricao" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="descricao"/>
	</field>
	<field name="qtd" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="qtd"/>
		<property name="com.jaspersoft.studio.field.name" value="qtd"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="equipamento"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="qtd_cautela" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{qtd}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="20" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<textField textAdjust="StretchHeight">
				<reportElement x="0" y="0" width="400" height="20" uuid="8f52f59d-5af5-4505-8f44-5924e99f1bb7">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descricao}]]></textFieldExpression>
			</textField>
			<textField textAdjust="StretchHeight">
				<reportElement x="400" y="0" width="40" height="20" uuid="e834d342-0c84-48f3-9e97-6be450cb0de5">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{qtd}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<lastPageFooter>
		<band height="20">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<frame>
				<reportElement mode="Transparent" x="0" y="0" width="440" height="20" backcolor="#FFFFFF" uuid="aaea364b-b1a2-4623-8ac4-0e8ba8c172e4">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textField pattern="">
					<reportElement mode="Transparent" x="0" y="0" width="430" height="20" forecolor="#000000" backcolor="#FFFFFF" uuid="40741801-f93c-40f8-915d-4cc1e3c27771">
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="Arial" size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Total no Destino: " + $V{qtd_cautela} + " "]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</lastPageFooter>
</jasperReport>
